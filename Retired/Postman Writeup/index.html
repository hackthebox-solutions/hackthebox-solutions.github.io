<!-- Fix MathJax rendering on iOS Safari due to rendering long numbers as phone numbers. -->




<!doctype html>
<html lang="en" class="no-js">
  <head>
    
	
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A compilation of writeups for the website- [**https://www.hackthebox.eu/](https://www.hackthebox.eu/**).">
      
      
        <link rel="canonical" href="http://hackthebox-solutions.github.io/Retired/Postman Writeup/">
      
      
        <meta name="author" content="Rushi Chaudhari">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
	<meta name="format-detection" content="telephone=no">

    
      
        <title>9. Postman Writeup.md - Hackthebox Solutions</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/katex.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#tldr" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://hackthebox-solutions.github.io" title="Hackthebox Solutions" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Hackthebox Solutions
            </span>
            <span class="md-header-nav__topic">
              
                9. Postman Writeup.md
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/hackthebox-solutions/hackthebox-solutions.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hackthebox-solutions.github.io
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://hackthebox-solutions.github.io" title="Hackthebox Solutions" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Hackthebox Solutions
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/hackthebox-solutions/hackthebox-solutions.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hackthebox-solutions.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      I Retired
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        I Retired
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Access Writeup/" title="1. Access Writeup.md" class="md-nav__link">
      1. Access Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Jerry Writeup/" title="2. Jerry Writeup.md" class="md-nav__link">
      2. Jerry Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Blue Writeup wo Metasploit/" title="3. Blue Writeup w/o Metasploit.md" class="md-nav__link">
      3. Blue Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Blocky Writeup/" title="4. Blocky Writeup.md" class="md-nav__link">
      4. Blocky Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Calamity Writeup/" title="5. Calamity Writeup.md" class="md-nav__link">
      5. Calamity Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Devoops Writeup/" title="6. Devoops Writeup.md" class="md-nav__link">
      6. Devoops Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Apocalyst Writeup/" title="7. Apocalyst Writeup.md" class="md-nav__link">
      7. Apocalyst Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Poison Writeup wo Metasploit/" title="8. Poison Writeup w/o Metasploit.md" class="md-nav__link">
      8. Poison Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="9. Postman Writeup.md" class="md-nav__link md-nav__link--active">
      9. Postman Writeup.md
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Beep Writeup/" title="10. Beep Writeup.md" class="md-nav__link">
      10. Beep Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Help Writeup/" title="11. Help Writeup.md" class="md-nav__link">
      11. Help Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Mirai Writeup/" title="12. Mirai Writeup.md" class="md-nav__link">
      12. Mirai Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Curling Writeup/" title="13. Curling Writeup.md" class="md-nav__link">
      13. Curling Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Nibbles Writeup wo Metasploit/" title="14. Nibbles Writeup w/o Metasploit.md" class="md-nav__link">
      14. Nibbles Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Valentine Writeup wo Metasploit/" title="15. Valentine Writeup w/o Metasploit.md" class="md-nav__link">
      15. Valentine Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Popcorn Writeups/" title="16. Popcorn Writeups.md" class="md-nav__link">
      16. Popcorn Writeups.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Cronos Writeup/" title="17. Cronos Writeup.md" class="md-nav__link">
      17. Cronos Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Legacy Writeup/" title="18. Legacy Writeup.md" class="md-nav__link">
      18. Legacy Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Openadmin Writeup/" title="19. Openadmin Writeup.md" class="md-nav__link">
      19. Openadmin Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Bank Writeup/" title="20. Bank Writeup.md" class="md-nav__link">
      20. Bank Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Shocker Writeup wo Metasploit/" title="21. Shocker Writeup w/o Metasploit.md" class="md-nav__link">
      21. Shocker Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Luke Writeup/" title="22. Luke Writeup.md" class="md-nav__link">
      22. Luke Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Arctic Writeup wo Metasploit/" title="23. Arctic Writeup w/o Metasploit.md" class="md-nav__link">
      23. Arctic Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Granny Writeup/" title="24. Granny Writeup.md" class="md-nav__link">
      24. Granny Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Netmon Writeup/" title="25. Netmon Writeup.md" class="md-nav__link">
      25. Netmon Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Sense Writeup wo Metasploit/" title="26. Sense Writeup w/o Metasploit.md" class="md-nav__link">
      26. Sense Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Sunday Writeup wo Metasploit/" title="27. Sunday Writeup w/o Metasploit.md" class="md-nav__link">
      27. Sunday Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Solidstate Writeup wo Metasploit/" title="28. Solidstate Writeup w/o Metasploit.md" class="md-nav__link">
      28. Solidstate Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Celestial Writeup/" title="29. Celestial Writeup.md" class="md-nav__link">
      29. Celestial Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Tenten Writeup/" title="30. Tenten Writeup.md" class="md-nav__link">
      30. Tenten Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Optimum Writeup/" title="31. Optimum Writeup.md" class="md-nav__link">
      31. Optimum Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Haircut Writeup/" title="32. Haircut Writeup.md" class="md-nav__link">
      32. Haircut Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Irked Writeup/" title="33. Irked Writeup.md" class="md-nav__link">
      33. Irked Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Chatterbox Writeup wo Metasploit/" title="34. Chatterbox Writeup w/o Metasploit.md" class="md-nav__link">
      34. Chatterbox Writeup w/o Metasploit.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Bashed Writeup/" title="35. Bashed Writeup.md" class="md-nav__link">
      35. Bashed Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Lame Writeup/" title="36. Lame Writeup.md" class="md-nav__link">
      36. Lame Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Grandpa Writeup/" title="37. Grandpa Writeup.md" class="md-nav__link">
      37. Grandpa Writeup.md
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Swagshop Writeup/" title="38. Swagshop Writeup.md" class="md-nav__link">
      38. Swagshop Writeup.md
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/hackthebox-solutions/hackthebox-solutions.github.io/edit/master/docs/Retired/Postman Writeup.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <p><img alt="https://www.hackthebox.eu/home/machines/profile/215" src="https://cdn-images-1.medium.com/max/1162/1*2j3KMD5ILPENt6Jkm9bhEg.png" /></p>
<h1 id="tldr">TL;DR</h1>
<p>Postman from Hack the Box is an easy-rated box which includes exploiting a misconfigured Redis service, allowing you to drop your public key to ssh in the box. It leads to an encrypted SSH private key which is easily crackable through John to get user. For root, I exploit a authenticated vulnerability using Metasploit.</p>
<h1 id="scanning">Scanning</h1>
<p>I first run an nmap scan with -sV (determine service/version info) and -sC (run default nmap scripts on ports), saving it to all formats (-oA), calling it initial:</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>nmap -sV -sC -oA nmap/initial 10.10.10.160
</pre></div>

<p>The results show that port 22 which is running OpenSSH 7.6p1, port 80 running Apache httpd 2.4.29, and port 10000 running MiniServ 1.910 (Webmin httpd). Note that it mentions that the box is Ubuntu. I won’t bother with SSH as the version is recent and there are no recent exploits for OpenSSH that are useful in this scenario.</p>
<p><img alt="" src="../../img/Postman Writeup/1_A__gBs3bhd0JB_dSFPVTHg.png" /></p>
<p>I also run a scan for all TCP ports with the -p- flag. Note that nmap only scans the top 1000 ports(not in order, but really the top 1000 common ports).</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>nmap -p- --max-retries 1 -oA nmap/allports-tcp 10.10.10.160
</pre></div>

<p><img alt="" src="../../img/Postman Writeup/1_gvYMz1i5jcP8Wpug0Duu4A.png" /></p>
<p>It shows that port 6379 is open, which is missed by my initial scan.</p>
<h4 id="port-80">Port 80</h4>
<p>Visiting the page, it mentions that it is under construction.</p>
<p><img alt="" src="../../img/Postman Writeup/1__ik5bR64rgSLSskjYCKAgQ.png" /></p>
<p>Scrolling down mentions a “postman@htb”, and a thing about cookies.</p>
<p><img alt="" src="../../img/Postman Writeup/1_h7vXe6y02CyDOGDqRo450Q.png" /></p>
<p>I then run <a href="https://github.com/OJ/gobuster">Gobuster </a>to check for interesting directories:</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>gobuster dir -u [http://10.10.10.160](http://10.10.10.160) -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -o gobuster-root
</pre></div>

<p>The results shows an upload folder:</p>
<p><img alt="" src="../../img/Postman Writeup/1_6XtA_0GKbPng8eo2T202jA.png" /></p>
<p>Visiting /upload, I can see images that are used in the website. I found nothing interesting in the other directories.</p>
<p><img alt="" src="../../img/Postman Writeup/1_4I1B_DaacJIoFj1GjrbMIg.png" /></p>
<h4 id="port-10000">Port 10000</h4>
<p>Since nothing is interesting in port 80, I visit port 10000 and it mentions that the web server is running in SSL mode.</p>
<p><img alt="" src="../../img/Postman Writeup/1_8ZFTmQyW7_GqGd734Z_7Tw.png" /></p>
<p>I also add an entry to my hosts file(/etc/hosts) since I’m using Kali when I solved this box. Visiting the page shows login page to the server postman.</p>
<blockquote>
<p>Webmin is a web-based interface for system administration for Unix. Using any modern web browser, you can setup user accounts, Apache, DNS, file sharing and much more.</p>
</blockquote>
<p><img alt="" src="../../img/Postman Writeup/1_llXHluk81UB0GVyDsL3qlg.png" /></p>
<p>I try to login using basic credentials like admin:admin, but it doesn’t work:</p>
<p><img alt="" src="../../img/Postman Writeup/1_H3RrNxxEkBDEk_dJ2MuJkA.png" /></p>
<p>Since it is a web-based interface for system administration for Unix, I check searchsploit for any exploits I can use:</p>
<p><img alt="" src="../../img/Postman Writeup/1_2nqqrZhYyfLJehN2xEqD2Q.png" /></p>
<p>Since Webmin is running version 1.910, only a few exploits is available. One exploit that is an RCE for version 1.910 requires a valid login when inspecting the exploit.</p>
<h4 id="port-6379-redis">Port 6379 — Redis</h4>
<p>I now try to dig in with the Redis service.</p>
<blockquote>
<p>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker. It supports data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs, geospatial indexes with radius queries and streams.</p>
</blockquote>
<p>I first look for ways to interact with the Redis service. Common ways are using telnet, and using the redis-cli. When I initially solved this box, I used telnet but for this writeup I used redis-cli. Using the redis-cli is much easier in this scenario but it is good to know that you can interact with it using telnet.</p>
<p>I first check if I connected properly:</p>
<p><img alt="" src="../../img/Postman Writeup/1_hWiblo6UAE1o_mpmrckmmA.png" /></p>
<p>Then I check the current directory I am in:</p>
<p><img alt="" src="../../img/Postman Writeup/1_WazBQsb69XWqNndx9HnApQ.png" /></p>
<p>Finding out that I’m at /var/lib/redis, I try if I can change directories. I did this to find out if I can guess which directories are available/accessible as this Redis user.</p>
<p><img alt="" src="../../img/Postman Writeup/1__mOhorgLQnCqsV-4ANtvOw.png" /></p>
<p>I then run config get * to list all the supported configuration parameters. One thing that stands out is “authorized_keys”. I usually come across this in an SSH directory. An authorized_keys file contains the public keys of the users who can login through SSH using key-based.</p>
<p><img alt="" src="../../img/Postman Writeup/1_f4kPt6SmXz7Aeg4dJQjMSA.png" /></p>
<p>There is also an entry for /var/lib/redis/.ssh:</p>
<p><img alt="" src="../../img/Postman Writeup/1_uwMYppGsNXUGb1XxPHTypA.png" /></p>
<p>I tried to change my directory to it:</p>
<p><img alt="" src="../../img/Postman Writeup/1_ItG-8nqbEZC8xl3_1fYl4Q.png" /></p>
<p>Knowing that a /.ssh directory is inside the redis folder, I then looked for write ups on how I can leverage Redis with a /.ssh and came across this page: <a href="http://antirez.com/news/96">http://antirez.com/news/96</a>. I suggest you read it to learn more about Redis security misconfigurations.</p>
<p>I then generate a ssh key pair using the ssh-keygen command:</p>
<p><img alt="" src="../../img/Postman Writeup/1_nMPEHnxL8J_04hkmhWg4lw.png" /></p>
<p>I then save the contents of the public key using with new lines to make sure the format is consistent:</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>(echo -e &quot;\n\n&quot;; cat sifo.pub; echo -e &quot;\n\n&quot;) &gt; foo.txt
</pre></div>

<p>I then pipe the contents to the redis-cli command and dump it into its memory:</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>cat foo.txt | redis-cli -h 10.10.10.160  -x set crackit
</pre></div>

<p>I then save what’s in memory to a file called authorized_keys</p>
<p><img alt="" src="../../img/Postman Writeup/1_cAh_DmPmwSyC4KIK9H2CLQ.png" /></p>
<p>I then try to SSH using the Redis user, and is able to do so.</p>
<p><img alt="" src="../../img/Postman Writeup/1_Qp5vDKOI4RvtgC6iE_Aemw.png" /></p>
<h4 id="redis-matt">Redis → Matt</h4>
<p>Checking the files in the current directory, I tried to read what’s inside its bash_history file.</p>
<p><img alt="" src="../../img/Postman Writeup/1_YGnrKpKOjS11-5d4O9eQDg.png" /></p>
<p>There is an entry of “su Matt” in the bash_history file, a mention of an “id_rsa.bak” and a mention of the sshd_config.</p>
<p><img alt="" src="../../img/Postman Writeup/1_dB49bVV9ZuAiPPiQhSHIYA.png" /></p>
<p>I check the passwd file and see that there is a user Matt.</p>
<p><img alt="" src="../../img/Postman Writeup/1_hE-MTDzdtvmQK2jrFxnEyA.png" /></p>
<p>I then check for files owned by the Matt:</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos=" 1 "></span>redis@Postman:~$ find / -user Matt 2&gt;/dev/null
<span class="lineno" data-linenos=" 2 "></span>/opt/id_rsa.bak
<span class="lineno" data-linenos=" 3 "></span>/home/Matt
<span class="lineno" data-linenos=" 4 "></span>/home/Matt/.bashrc
<span class="lineno" data-linenos=" 5 "></span>/home/Matt/.bash_history
<span class="lineno" data-linenos=" 6 "></span>/home/Matt/.gnupg
<span class="lineno" data-linenos=" 7 "></span>/home/Matt/.ssh
<span class="lineno" data-linenos=" 8 "></span>/home/Matt/user.txt
<span class="lineno" data-linenos=" 9 "></span>/home/Matt/.selected_editor
<span class="lineno" data-linenos="10 "></span>/home/Matt/.local
<span class="lineno" data-linenos="11 "></span>/home/Matt/.local/share
<span class="lineno" data-linenos="12 "></span>/home/Matt/.profile
<span class="lineno" data-linenos="13 "></span>/home/Matt/.cache
<span class="lineno" data-linenos="14 "></span>/home/Matt/.wget-hsts
<span class="lineno" data-linenos="15 "></span>/home/Matt/.bash_logout
<span class="lineno" data-linenos="16 "></span>/var/www/SimpleHTTPPutServer.py
</pre></div>

<p>It seems that there is backup of an id_rsa file(usually a private key use for SSH) stored in /opt. I move the file to my machine using netcat:</p>
<p><img alt="" src="../../img/Postman Writeup/1_TKOdUs3NCJCTz_ArXn0_lg.png" /></p>
<p>Checking its contents, it is encrypted:</p>
<p><img alt="" src="../../img/Postman Writeup/1_HLqrXaghuLSzxQRsHF4c4g.png" /></p>
<p>I then try to crack it using John. I first have to convert the file in a format that John accepts. This can be done using ssh2john.py:</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>ssh2john.py id_rsa.bak &gt; id_rsa.enc
</pre></div>

<p>I then crack it using John:</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.enc
</pre></div>

<p>The password is computer 2008.</p>
<p><img alt="" src="../../img/Postman Writeup/1_Fruo3IRDQ7nHmN4qYTyoow.png" /></p>
<p>I then tried to login using the private key, and when asked for the password, use computer2008:</p>
<p><img alt="" src="../../img/Postman Writeup/1_BueZquKD0cydd-uvJXODxw.png" /></p>
<p>The login is unsuccessful, and prompts me to the root login, asking me for a password. I tried to just switch to the user Matt, using the password computer2008, and it works.</p>
<p><img alt="" src="../../img/Postman Writeup/1_VvDTFz1tU8g7-YQqPOE14Q.png" /></p>
<p>I can now read user.txt:</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>Matt@Postman:~$ cat user.txt
<span class="lineno" data-linenos="2 "></span>517ad0ec24....
</pre></div>

<h4 id="matt-root">Matt → Root</h4>
<p>I then check for running processes, and find that Webmin is running as root:</p>
<p><img alt="" src="../../img/Postman Writeup/1_Hld-SIii26d2MfCyfvAC7w.png" /></p>
<p>I tried to login using the credentials Matt:computer2008, and it works!</p>
<p><img alt="" src="../../img/Postman Writeup/1_34UcxJy48PstZyphvLCMVQ.png" /></p>
<p>I then comeback to the exploit mentioned earlier which requires credentials. The vulnerability allows a user authorized to the “Package Updates” module execute arbitrary commands with root privileges. Details of the vulnerability and exploit can be found here: <a href="https://www.cvedetails.com/cve/CVE-2019-12840/">https://www.cvedetails.com/cve/CVE-2019-12840/</a></p>
<p>I then run Metasploit and use exploit/linux/http/webmin_packageup_rce. The options that were set can be seen below:</p>
<p><img alt="" src="../../img/Postman Writeup/1_4PM1T8jA-MNLOEh05_PLVw.png" /></p>
<p>Running the exploit leads to a root shell:</p>
<p><img alt="" src="../../img/Postman Writeup/1_vcomnDH-ECQW5BK_mJGAZQ.png" /></p>
<p>And now I can now read root.txt..</p>
<div class="highlight"><pre><span></span><span class="lineno" data-linenos="1 "></span>cat /root/root.txt
<span class="lineno" data-linenos="2 "></span>a257741c5bed8b....
</pre></div>

<p>I checked into the /etc/ssh/sshd_config and found out that Matt was denied to login using SSH, hence it not working.</p>
<p><img alt="" src="../../img/Postman Writeup/1_5Dho9G_UyGGQVTqe0jz9dA.png" /></p>
<p>I also tried to get a shell, which I am able to by using bash -c:</p>
<p><img alt="" src="../../img/Postman Writeup/1_Afg5PSMlvBbd1nKzfhAoIQ.png" /></p>
<p>I checked the files under root’s home directory, and found that bash_history is not empty and its size is 14350 characters, which means that maybe I can see how the box creator made the box:</p>
<p><img alt="" src="../../img/Postman Writeup/1_PXQWggn8NlPI1_Rl9XErcA.png" /></p>
<p>Checking the first few commands, it shows how the user installed ssh, installed net-tools, and added the user Matt 😺</p>
<p><img alt="" src="../../img/Postman Writeup/1_owFcw8FemI_9JQJx8jcwIg.png" /></p>
<p>And that’s how I solved Postman from HacktheBox! It was a very long journey but definitely worth it! Thanks for reading! 🍺</p>
<hr />
<p><em>Follow <a href="https://medium.com/bugbountywriteup">Infosec Write-ups</a> for more such awesome write-ups.</em></p>
<blockquote>
<p><a href="https://medium.com/bugbountywriteup"><strong>InfoSec Write-ups</strong></a></p>
<p><small>A collection of write-ups from the best hackers in the world on topics ranging from bug bounties and CTFs to vulnhub machines, hardware challenges and real life encounters. In a nutshell, we are the largest InfoSec publication on Medium. Maintained by Hackrew</small></p>
</blockquote>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Poison Writeup wo Metasploit/" title="8. Poison Writeup w/o Metasploit.md" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                8. Poison Writeup w/o Metasploit.md
              </span>
            </div>
          </a>
        
        
          <a href="../Beep Writeup/" title="10. Beep Writeup.md" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                10. Beep Writeup.md
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Built by <a href="http://github.com/rushic24">Rushi</a> &copy; 2020
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/rushic24" class="md-footer-social__link fa fa-"></a>
    
      <a href="https://www.linkedin.com/in/rushichaudhari" class="md-footer-social__link fa fa-"></a>
    
      <a href="" class="md-footer-social__link fa fa-"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../js/katex.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>